---
title: 'Week 03 - Assignment: Electricity Market Prices'
author: "Uğur Aşkar"
date: "2020-11-04"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
library(lubridate)
library(knitr)
```

## Preparing data for analysis

```{r}
raw_df = read.csv("C:\\data\\EPIAS_EXIST_MCP_SMP\\ptf-smf.csv",header=TRUE,dec=",")
knitr::kable(raw_df[1:5,], format="markdown", align='cc')
```
Pulling data from our file system with read_csv function.

```{r, warning=FALSE}
char_to_numeric = function(char_string){
  numeric_value = as.numeric(sub(',', '.',sub('.', '', char_string, fixed = TRUE)))
  return(numeric_value)
}

clean_names = c("DATE_TIME","MARKET_TRADE_PRICE","SYSTEM_MARGINAL_PRICE","POSITIVE_IMBALANCE_PRICE","NEGATIVE_IMBALANCE_PRICE","SYSTEM_MARGINAL_PRICE_COURSE")
clean_df = setNames(raw_df, clean_names) %>% transform(DATE_TIME = as.POSIXct(DATE_TIME,format='%d.%m.%y %H:%M'), SYSTEM_MARGINAL_PRICE = char_to_numeric(SYSTEM_MARGINAL_PRICE), NEGATIVE_IMBALANCE_PRICE = char_to_numeric(NEGATIVE_IMBALANCE_PRICE))
knitr::kable(clean_df[1:5,], format="markdown", align='cc')
```
Cleaned our data here also defined a function to convert our data types to numeric(instead of char) so we can analyze it further.